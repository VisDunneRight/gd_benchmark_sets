
<!doctype html>
<html>
<head>
    <title>Graph Benchmark Datasets</title>
    <meta name="description" content="Graph Benchmark Datasets">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>

    <style>
        #named-list {
            display: flex;
            flex-direction: column;
            font-size: small;
            padding-bottom: 5%;
        }

        .small-text {
            font-size: small;
        }

        .footer{
            /* position: fixed; */
            bottom: 0;
            width: 100%;
            height: 2.5rem;
            background-color: gray;
            text-align: center;
            padding-top: 1%;
        }
    </style>
</head>
<body>

    <div class="container overflow-hidden">
        <h1 class="" style="margin-top: 5%">Graph Benchmark Datasets</h1>
        <div class="row">
          <!-- <div class="col-sm-2">
            navbar navbar navbar menu menu menu <br> <br>
            Usage instructions, cite us at [bibtex]
          </div> -->
          <div class="col-lg-10 bg-light">
            The following is a list of benchmark datasets for testing graph layout algorithms. <br>
            Click on the names of the collections to expand them and access information about their contents and a list of papers using them.
            <br>
            TODO: sort with some criteria <br>
            <br>
            <br>
            <div id="named-list">
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        Hello I am footer
      </div>
</body>
<script>
    function add_simple_field(entry, field_name, div){
        if (entry[field_name] != "" && entry[field_name] != undefined){
            div.append("div").html("<b>" + field_name + ": </b>" + urlify(entry[field_name]))
        }
    }

    function urlify(text) {
        var urlRegex = /(([a-z]+:\/\/)?(([a-z0-9\-]+\.)+([a-z]{2}|aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel|local|internal))(:[0-9]{1,5})?(\/[a-z0-9_\-\.~]+)*(\/([a-z0-9_\-\.]*)(\?[a-z0-9+_\-\.%=&amp;]*)?)?(#[a-zA-Z0-9!$&'()*+.=-_~:@/?]*)?)(\s+|$)/gi;
        return text.replace(urlRegex, function(url) {
            return '<a href="' + url + '">' + url + '</a>';
        })
    }

    function doify(text){
        if (text == "" || text == undefined) return text;
        if (text.includes("doi")) return (text);
        else return ("https://doi.org/" + text);
    }

    function getTextAfterSecondEmptyLine(input) {
        const lines = input.split('\n');
        let emptyLineCount = 0;
        let text = '';

        for (let i = 0; i < lines.length; i++) {
            const line = lines[i].trim();
            
            if (line === '') {
                emptyLineCount++;
                
                if (emptyLineCount === 2) {
                    // Collect text after the second empty line
                    text = lines.slice(i + 1).join('\n');
                    break;
                }
            } 
        }
        
        return text;
    }

    function name_cleanup(name){
        return name.replace("(", "").replace(")", "").replace(" ", "_").replace(".", "").replace("'", "").replace("&", "").replaceAll(" ", "")
    }

    async function add_entry_row(named_list_dom, paper_data, entry){
        // console.log(entry["Type of Collection"])
        
        let row = named_list_dom.append("div")
            .attr("class", "row")

        row.append("div")
            .attr("class", "col")
            .append("a")
            .style("font-weight", "bold")
            .html("<u>" + entry["Name"] + "</u>")
            .attr("data-bs-toggle", "collapse")
            .attr("href", "#inforow_" + name_cleanup(entry["Name"]))
            .attr("aria-expanded", "false")
            .attr("aria-controls", "inforow_" + name_cleanup(entry["Name"]))
            .style("color", "black")
            .attr("role", "button")

        let gfeatures = row.append("div")
            .attr("class", "col")
        
        for (let graph_feature of entry["graph features handled"].split(",")){
            gfeatures.append("div")
                .attr("class", "rounded-pill badge")
                .style("margin", "2px")
                .style("background-color", graph_feature_tags_colors[graph_feature_tags.indexOf(graph_feature)%graph_feature_tags_colors.length])
                .text(graph_feature)
        }

        let infocontainer = row.append("div")
            .attr("class", "container collapse")
            .attr("id", "inforow_" + name_cleanup(entry["Name"]))
            .style("padding", "2%")

        let inforow = infocontainer.append("div")
            .append("div")
            .attr("class", "card card-body")
            .append("div")
            .attr("class", "col small-text")

        add_simple_field(entry, "where to find", inforow)
        add_simple_field(entry, "Note", inforow)
        add_simple_field(entry, "Number of Files", inforow)
        add_simple_field(entry, "Size", inforow)
        add_simple_field(entry, "Origin Notes", inforow)
        add_simple_field(entry, "Format", inforow)

        inforow.append("div").html("<b>Origin paper: </b>")
        for (let e of entry["Origin paper plaintext"].split(",")){
            e = e.trim();
            if (e == "") continue;
            let origindoi = (paper_data.find(a => a.Name == e) || {}).DOI
            if (origindoi != undefined && origindoi != "") 
                inforow.append("div").html('<a href="' + doify(origindoi) + '">' + "[link]" + '</a> &nbsp;' + e)
            else inforow.append("div").html(e)
        }

        inforow.append("div").html("<b>Usage examples: </b>")
        for (let i in entry["Related to Literature plaintext"].split(",")){
            let e = entry["Related to Literature plaintext"].split(",")[i].trim()
            if (e != "") {
                let doi = (paper_data.find(a => a.Name == e) || {}).DOI
                let link;
                if (doi != undefined && doi != "") link = '<a href="' + doify(doi) + '">[link]</a>'
                else link = ""
                inforow.append("div").html(link + " &nbsp; " + urlify(e))
            }
        }

        inforow.append("br")

        // DRAW REST OF THE PAGE
        let otherinfo = ""
        try{
            let otherinfo = await fetch("notion_data/Benchmark datasets 64e0439269f9497799025562a4087ce1/" + entry["Name"].replace(".", "") + " " + entry["Page id"] + ".md")
            otherinfo = await otherinfo.text()
            var converter = new showdown.Converter();
            
            otherinfo = getTextAfterSecondEmptyLine(otherinfo);
            
            for (let line of otherinfo.split("\n")){
                if (line[0] == "!") {
                    let img = line.split("(")[1].slice(0, -1)
                    inforow.append("div")
                        .style("text-align", "center")
                        .append("img")
                        .attr("src", "notion_data/Benchmark datasets 64e0439269f9497799025562a4087ce1/" + img)
                        .attr("width", "50%")
                } else if (line.includes("STOP RENDERING")){
                     break;
                } else inforow.append("div").html(converter.makeHtml(line))
                
            }

        } catch (e){
            console.log(e)
        }

        inforow.append("br")
        // break;

        row.append("hr")
            .style("margin-left", "2.5%")
            .style("width", "95%")
            .style("margin-top", "5px")
            .style("margin-bottom", "5px")
    }

    graph_feature_tags = []
    graph_feature_tags_colors = ["#9B9A97", "#64473A", "#D9730D", "#DFAB01", "#0F7B6C", "#0B6E99", "#6940A5", "#AD1A72", "#E03E3E"]

    async function main(){
        let data = await d3.csv("notion_data/Benchmark datasets 64e0439269f9497799025562a4087ce1 4.csv")
        let paper_data = await d3.csv("notion_data/Literature - Algorithm 12e01bfc60a84007aa7d2d34293e123d 5.csv")
        let named_list_dom = d3.select("#named-list")

        for (let entry of data){
            if (entry["graph features handled"] != "" && entry["graph features handled"] != undefined){
                let tags = entry["graph features handled"].split(",")
                for (let tag of tags){
                    if (!graph_feature_tags.includes(tag)){
                        graph_feature_tags.push(tag)
                    }
                }
            }
        }

        named_list_dom.append("div")
            .attr("class", "row")
            .append("div")
            .attr("class", "col")
            .append("h3")
            .text("Benchmark datasets")
            .style("margin-top", "10px")

        named_list_dom.append("div")
            .attr("class", "row")
            .append("div")
            .attr("class", "col")
            .append("p")
            .text("These are collections of graphs that have been frequently used in graph drawing papers. By clicking on each collection name, you can see additional information. We also provide an analysis of the contents of each collection, and a list of papers that use them, their sources, and various types of information.")
            .style("color", "gray")
        
        for (let entry of data.filter(d => d["Type of Collection"] == "Small Collection (Do report)")){
            entry.added = true;
            await add_entry_row(named_list_dom, paper_data, entry)
        }

        named_list_dom.append("div")
            .attr("class", "row")
            .append("div")
            .attr("class", "col")
            .append("h3")
            .text("Large, well-known collections")
            .style("margin-top", "10px")

        named_list_dom.append("div")
            .attr("class", "row")
            .append("div")
            .attr("class", "col")
            .append("p")
            .text("The following collections are organized, classified and maintained by other people or institutions. We do not claim any ownership over them, and we do not guarantee that they will be maintained in the future. We provide links to them for convenience, as well as information about which papers use them and what features are contained in the graphs in them.")
            .style("color", "gray")

        for (let entry of data.filter(d => d["Type of Collection"] == "Large Collection (No report)")){
            entry.added = true;
            await add_entry_row(named_list_dom, paper_data, entry)
        }

        named_list_dom.append("div")
            .attr("class", "row")
            .append("div")
            .attr("class", "col")
            .append("h3")
            .text("Aggregate collections")
            .style("margin-top", "10px")

        named_list_dom.append("div")
            .attr("class", "row")
            .append("div")
            .attr("class", "col")
            .append("p")
            .text("The following collections are aggregates: they share similar sources and similar features/purpose. ")
            .style("color", "gray")

        for (let entry of data.filter(d => d["Type of Collection"] == "Aggregate collection")){
            entry.added = true;
            await add_entry_row(named_list_dom, paper_data, entry)
        }

        named_list_dom.append("div")
            .attr("class", "row")
            .append("div")
            .attr("class", "col")
            .append("h3")
            .text("Single Graphs")
            .style("margin-top", "10px")

        for (let entry of data.filter(d => d["Type of Collection"] == "Single Graph (Do report)")){
            entry.added = true;
            await add_entry_row(named_list_dom, paper_data, entry)
        }

        named_list_dom.append("div")
            .attr("class", "row")
            .append("div")
            .attr("class", "col")
            .append("h3")
            .text("Other")
            .style("margin-top", "10px")

        for (let entry of data.filter(d => d.added != true)){
            entry.added = true;
            await add_entry_row(named_list_dom, paper_data, entry)
        }

    }

    main()
</script>
</html>
